<%- include('../layouts/boilerplate', { title: title }) %>
<% var body = `
  <div class="max-w-4xl mx-auto mt-8">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-semibold">Webhooks</h1>
    </div>

    <div class="bg-white p-4 rounded shadow">
      <table class="w-full">
        <thead>
          <tr class="text-left text-sm text-gray-500"><th>URL</th><th>Events</th><th></th></tr>
        </thead>
        <tbody id="webhooks-rows">
          <% if (webhooks && webhooks.length) { %>
            <% webhooks.forEach(function(w){ %>
              <tr class="border-t"><td><%= w.url %></td><td><%= w.events %></td><td></td></tr>
            <% }) %>
          <% } else { %>
            <tr><td colspan="3" class="text-sm text-gray-500">Nessun webhook</td></tr>
          <% } %>
        </tbody>
      </table>

      <div class="mt-4">
        <form hx-post="/api/settings/webhooks" hx-target="#webhooks-rows" hx-swap="beforeend" class="grid grid-cols-3 gap-3">
          <input name="url" placeholder="https://example.com/webhook" class="col-span-2 px-3 py-2 border rounded" />
          <input name="events" placeholder="order.created,product.updated" class="px-3 py-2 border rounded" />
          <div class="col-span-3 flex justify-end">
            <button type="submit" class="px-4 py-2 rounded bg-primary text-white">Aggiungi</button>
          </div>
        </form>
      </div>
    </div>
  </div>
` %>
