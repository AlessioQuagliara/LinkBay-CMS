    <!-- Footer -->
    <footer class="bg-danger text-light text-center py-4">
        <div class="container">
            <p>{{ translate('This site is not part of FacebookTM or FacebookTM Inc. Also, this site is NOT endorsed by FacebookTM in any way. FacebookTM is a registered trademark of FacebookTM Inc.') }}</p>
        </div>
        <br>
        <div class="container">
            <p> <a href=""class="link-dark" style="text-decoration: none;">{{ translate('Terms and Conditions') }}</a> | <a href=""class="link-dark" style="text-decoration: none;" >{{ translate('Privacy and Cookie Policy') }}</a> </p>
        </div> 
        <br>
        <div class="container">
            <p class="m-0">&copy; 2024 LinkBay CMS, {{ translate('Intellectual Work of Quagliara Alessio.') }}</p>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- FontAwesome JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <!-- SweetAlert JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.27/dist/sweetalert2.all.min.js"></script>
    <!-- AOS JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <!-- Script per SweetAlert -->
    <script>
        AOS.init({
            duration: 1000, // Durata dell'animazione in millisecondi
            once: true, // L'animazione avviene solo una volta quando si scorre
        });
        $(document).ready(function() {
            $('#alertButton').click(function() {
                Swal.fire({
                    title: 'Benvenuto!',
                    text: 'Questo è un esempio di SweetAlert con Bootstrap.',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
            });
        });

        // Modals

        let currentStep = 1;
        
        function showStep(step) {
          document.querySelectorAll('.modal-body > div').forEach(function(div) {
            div.classList.add('d-none');
          });
          document.getElementById('step' + step).classList.remove('d-none');
        
          document.getElementById('prevBtn').style.display = step === 1 ? 'none' : 'inline-block';
          document.getElementById('nextBtn').style.display = step === 3 ? 'none' : 'inline-block';
        }
        
        function nextStep() {
          if (validateStep(currentStep)) {
            if (currentStep < 3) currentStep++;
            showStep(currentStep);
          }
        }
        
        function prevStep() {
          if (currentStep > 1) currentStep--;
          showStep(currentStep);
        }
        
        function validateStep(step) {
          if (step === 1) {
            const shop_name = document.getElementById('shop_name').value.trim();
            if (!shop_name) {
              document.getElementById('shopNameHelp').classList.remove('d-none');
              return false;
            }
            document.getElementById('shopNameHelp').classList.add('d-none');
            return true;
          }
        
          if (step === 2) {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
        
            // Controllo se l'email è valida
            if (!email) {
              document.getElementById('email').classList.add('is-invalid');
              document.getElementById('emailHelp').classList.remove('d-none');
              return false;
            } else {
              document.getElementById('email').classList.remove('is-invalid');
              document.getElementById('emailHelp').classList.add('d-none');
            }
        
            // Controllo se le password coincidono e non sono vuote
            if (!password || password !== confirmPassword) {
              document.getElementById('passwordMismatch').classList.remove('d-none');
              return false;
            } else {
              document.getElementById('passwordMismatch').classList.add('d-none');
            }
            
            return true;
          }
        
          return true;
        }

        document.querySelector('form').addEventListener('submit', function(event) {
          let isValid = true;
      
          // Validazione email
          const email = document.getElementById('userEmail').value.trim();
          if (!email) {
              document.getElementById('emailHelp').classList.remove('d-none');
              isValid = false;
          } else {
              document.getElementById('emailHelp').classList.add('d-none');
          }
      
          // Validazione privacy
          const privacyCheck = document.getElementById('privacyCheck').checked;
          if (!privacyCheck) {
              document.getElementById('privacyError').classList.remove('d-none');
              isValid = false;
          } else {
              document.getElementById('privacyError').classList.add('d-none');
          }
      
          // Se non valido, previeni l'invio
          if (!isValid) {
              event.preventDefault();
          }
      });
          
      // Sicurezza della password fatto a gradi
      function updatePasswordStrength() {
        const password = document.getElementById('password').value;
        const meterFill = document.getElementById('strength-meter-fill');
        const strengthText = document.getElementById('passwordStrengthText');
        
        let strength = 0;
        if (password.length > 6) strength++;
        if (/[A-Z]/.test(password)) strength++;
        if (/[0-9]/.test(password)) strength++;
        if (/[@$!%*?&#]/.test(password)) strength++;
        
        const strengths = ['{{ translate("Low") }}', '{{ translate("Medium") }}', '{{ translate("Strong") }}', '{{ translate("Very Strong") }}'];
        const colors = ['bg-danger', 'bg-warning', 'bg-info', 'bg-success'];
    
        let strengthIndex = Math.min(strength, strengths.length - 1); 
        
        if (meterFill) {
            meterFill.style.width = (strength * 25) + '%';
            meterFill.className = 'strength-meter-fill ' + colors[strengthIndex];
        }
        if (strengthText) {
            strengthText.textContent = '{{ translate("Degree of password security:") }} ' + strengths[strengthIndex];
        }
    }
    
    document.getElementById('shop_name').addEventListener('focus', function() {
        document.getElementById('shopNameHelp').classList.remove('d-none');
    });
    
    document.getElementById('shop_name').addEventListener('input', function() {
        this.value = this.value.replace(/\s+/g, '-');
    });
    
    document.getElementById('password').addEventListener('input', updatePasswordStrength);
    
    document.addEventListener('DOMContentLoaded', function() {
        showStep(currentStep);
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        var tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
        
// FORM --------------------------------------------------------------------------------------------------        
function inviaDati() {
    const formData = new FormData();
    formData.append('shop_name', document.getElementById('shop_name').value);
    
    // Ottiene il valore del radio button selezionato per themeOptions
    const selectedThemeOption = document.querySelector('input[name="themeOptions"]:checked').value;
    formData.append('themeOptions', selectedThemeOption);
    
    formData.append('email', document.getElementById('email').value);
    formData.append('password', document.getElementById('password').value);

    fetch('/create_shop', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok: ' + response.statusText);
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            Swal.fire({
                icon: 'success',
                title: '{{ translate("Success") }}',
                text: data.message,
                showConfirmButton: true,
            }).then(() => {
                document.body.style.overflow = ''; 
                window.location.href = '/login'; 
            });
        } else {
            Swal.fire({
                icon: 'error',
                title: '{{ translate("Error") }}',
                text: '{{ translate("Error") }}: ' + data.message
            });
        }
    })
    .catch(error => {
        console.error('Errore:', error);
        Swal.fire({
            icon: 'error',
            title: '{{ translate("Error") }}',
            text: '{{ translate("An error occurred while creating the store.") }}: ' + error.message
        });
    });
}        
        // ALREADY REGISTERED --------------------------------------------------------------------------
        
        $(document).ready(function() {
          $('#email').on('blur', function() {  
            var email = $(this).val();
            $.ajax({
              type: 'GET',  
              url: '/check_email',  
              data: { email: email },  
              success: function(response) {
                if (response.status === 'exists') {
                  Swal.fire({
                    icon: 'error',
                    title: '{{ translate("Error") }}',
                    text: '{{ translate("Email already registered. Please use another email, or sign in to create new stores from your dashboard") }}'
                  });
                  $('#email').addClass('is-invalid');
                  $('#email').next('.invalid-feedback').removeClass('d-none').text('{{ translate("Email already registered.") }}');
                } else {
                  $('#email').removeClass('is-invalid');
                  $('#email').next('.invalid-feedback').addClass('d-none');
                }
              },
              error: function() {
                Swal.fire({
                  icon: 'error',
                  title: '{{ translate("Connection error") }}',
                  text: '{{ translate("An error occurred while checking the email. Please try again later.") }}'
                });
              }
            });
          });
        });

        // ALREADY SHOP CREATED -------------------------------------------------------------------------
        
        $(document).ready(function() {
          $('#shop_name').on('blur', function() {  
            var shop_name = $(this).val();  // Modifica a shop_name
            $.ajax({
              type: 'GET',  
              url: '/check_shopname',  
              data: { shop_name: shop_name },  
              success: function(response) {
                if (response.status === 'exists') {
                  Swal.fire({
                    icon: 'error',
                    title: '{{ translate("Error") }}',
                    text: '{{ translate("The store name is already in use.") }}'
                  });
                  $('#shop_name').addClass('is-invalid');
                  $('#shop_name').next('.invalid-feedback').removeClass('d-none').text('{{ translate("Store Name Not Available") }}');
                } else {
                  $('#shop_name').removeClass('is-invalid');
                  $('#shop_name').next('.invalid-feedback').addClass('d-none');
                }
              },
              error: function() {
                Swal.fire({
                  icon: 'error',
                  title: '{{ translate("Connection error") }}',
                  text: '{{ translate("Connection with the server broken. Try again in a few minutes.") }}'
                });
              }
            });
          });
        });
        
        // FORM CONTACT ----------------------------------------------------------------------------
        document.querySelector('form').addEventListener('submit', function(event) {
          event.preventDefault();  // Previene il comportamento predefinito di submit
      
          const formData = new FormData();
          formData.append('userName', document.getElementById('userName').value);
          formData.append('userEmail', document.getElementById('userEmail').value);
          formData.append('userMessage', document.getElementById('userMessage').value);
          formData.append('privacyCheck', document.getElementById('privacyCheck').checked ? 'on' : '');
      
          fetch('/submit_contact', {
              method: 'POST',
              body: formData
          })
          .then(response => response.json())
          .then(data => {
              if (data.success) {
                  Swal.fire({
                      icon: 'success',
                      title: 'Successo',
                      text: data.message
                  });
              } else {
                  Swal.fire({
                      icon: 'error',
                      title: 'Errore',
                      text: data.message
                  });
              }
          })
          .catch(error => {
              console.error('Errore:', error);
              Swal.fire({
                  icon: 'error',
                  title: 'Errore',
                  text: 'Si è verificato un errore durante l\'invio del modulo.'
              });
          });
      });

    </script>