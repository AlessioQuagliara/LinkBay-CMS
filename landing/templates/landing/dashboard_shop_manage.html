{% extends 'landing/base.html' %}
{% block content %}

    <!-- CONTENUTI DINAMICI -->
    <div class="d-flex align-items-center mb-4">
  {% if is_owner == has_access %}
      <div>
        <h4 class="mb-0">üõ†Ô∏è Gestione Risorse</h4>
        <a href="/dashboard/stores" class="text-muted">Torna alla panoramica dei tuoi negozi.</a>
      </div>
    </div>
    <div id="content9" class="content-pane">
      <div class="row g-4">

        <!-- Abbonamento -->
        <div class="col-12">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <h5 class="card-title mb-2"><i class="fa-solid fa-file-contract"></i>&nbsp; Abbonamento attivo</h5>
              {% if subscription %}
                <p><strong>Piano:</strong> {{ subscription.plan_name }}</p>
                <p><strong>Prezzo:</strong> ‚Ç¨{{ subscription.price }} / mese</p>
                <p><strong>Scadenza:</strong> {{ subscription.renewal_date.strftime('%d/%m/%Y') }}</p>
              {% else %}
                <div class="alert alert-warning">Nessun abbonamento attivo</div>
              {% endif %}
            </div>
          </div>
        </div>

        <!-- Collaboratori -->
        {% if subscription and subscription.plan_name in ['AllIsReady', 'ProfessionalDesk'] %}
        <div class="col-md-6">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <h5 class="card-title mb-2"><i class="fa-solid fa-users"></i>&nbsp; Gestione Utenti</h5>
              <p>Condividi l‚Äôaccesso con altri collaboratori e gestisci i permessi.</p>
              <a href="/dashboard/users/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Gestisci utenti</a>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Domini -->
        {% if subscription and subscription.plan_name in ['AllIsReady', 'ProfessionalDesk'] %}
        <div class="col-md-6">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <h5 class="card-title mb-2"><i class="fa-solid fa-earth-americas"></i>&nbsp; Gestione Domini</h5>
              <p>Configura il tuo dominio personalizzato e monitora lo stato DNS.</p>
              <a href="/dashboard/domains/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Gestisci domini</a>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Monitoraggio & Analytics -->
        <hr>
        <h5 class="text-muted mt-4 mb-3"><i class="fa-solid fa-chart-simple"></i>&nbsp; Monitoraggio & Analytics</h5>
        <div class="row g-4">
          <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="card-title"><i class="fa-brands fa-google"></i>&nbsp; Google Analytics</h6>
                <p class="small text-muted">Collega il tuo account per monitorare il traffico.</p>
                <a href="/dashboard/analytics/google_analytics/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Configura</a>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="card-title"><i class="fa-brands fa-facebook"></i>&nbsp; Facebook Pixel</h6>
                <p class="small text-muted">Tieni traccia degli utenti da Facebook.</p>
                <a href="/dashboard/analytics/facebook_pixel/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Configura</a>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="card-title"><i class="fa-brands fa-tiktok"></i>&nbsp; TikTok Pixel</h6>
                <p class="small text-muted">Monitora conversioni dalle campagne TikTok.</p>
                <a href="/dashboard/analytics/tiktok_pixel/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Configura</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Integrazioni -->
        <hr>
        <h5 class="text-muted mt-4 mb-3"><i class="fa-solid fa-plug-circle-plus"></i>&nbsp; Integrazioni</h5>
        <div class="row g-4">
          {% for plugin in ['Aruba Fatturazione', 'Zapier', 'Mailchimp', 'Klaviyo', 'Zendesk', 'Twilio'] %}
          <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="card-title">{{ plugin }}</h6>
                <p class="small text-muted">Integra con {{ plugin }} per espandere le funzionalit√†.</p>
                <a href="/dashboard/integrations/{{ plugin|lower|replace(' ', '_') }}/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Gestisci</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>

        <!-- Metodi di Pagamento -->
        <hr>
        <h5 class="text-muted mt-4 mb-3"><i class="fa-solid fa-credit-card"></i>&nbsp; Metodi di Pagamento</h5>
        <div class="row g-4">
          {% for metodo in ['Stripe', 'PayPal'] %}
          <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="card-title">{{ metodo }}</h6>
                <p class="small text-muted">Configura {{ metodo }} per ricevere pagamenti online.</p>
                <a href="/dashboard/payments/{{ metodo|lower }}/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Imposta</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>

        {% if subscription and subscription.plan_name == 'ProfessionalDesk' %}
        <!-- Analisi Intelligente -->
        <hr>
        <h5 class="text-muted mt-4 mb-3"><i class="fa-solid fa-hexagon-nodes"></i>&nbsp; Analisi con Intelligenza Artificiale</h5>
        <div class="row g-4">
          <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="card-title"><i class="fa-solid fa-chart-pie"></i>&nbsp; Flusso Analitico Avanzato</h6>
                <p class="small text-muted">Scopri pattern di comportamento e previsioni vendita.</p>
                <a href="/dashboard/ai/analytics/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Visualizza Analisi</a>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="card-title"><i class="fa-solid fa-bullhorn"></i>&nbsp; Campagne Pubblicitarie</h6>
                <p class="small text-muted">Crea e ottimizza campagne marketing con suggerimenti AI.</p>
                <a href="/dashboard/ai/campaigns/{{ shop_name }}" class="btn btn-outline-primary btn-sm">Gestisci Campagne</a>
              </div>
            </div>
          </div>
        </div>
        {% endif %}

      </div>
    {% else %}
        <div class="container py-5 text-center">
          <h2 class="mb-3"><i class="fa-solid fa-ban"></i>&nbsp; Accesso Negato</h2>
          <p class="lead">Questo store non √® tuo. Per collaborare, puoi inviare una richiesta al proprietario.</p>
          <a href="/dashboard/stores" class="btn btn-outline-dark mt-3">
            <i class="fa-solid fa-arrow-left"></i> Torna alla tua dashboard
          </a>
        </div>
    {% endif %}
    </div>

<script src="/static/js/superadmin/access.js"></script>
{% endblock %}
