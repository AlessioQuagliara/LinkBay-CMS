<% /* Usage: include checkout form partial */ %>
<div x-data="{ currentStep: 1, formData: {} }" class="bg-white p-4 rounded-lg shadow">
  <div class="flex space-x-2 mb-4">
    <template x-for="s in [1,2,3]" :key="s">
      <div :class="currentStep === s ? 'font-semibold' : 'text-gray-500'">Step <span x-text="s"></span></div>
    </template>
  </div>

  <div x-show="currentStep === 1">
    <label class="block text-sm">Nome</label>
    <input x-model="formData.name" class="mt-1 block w-full border rounded" />
    <div class="mt-2">
      <button @click="currentStep=2" class="px-3 py-2 rounded bg-primary text-white">Avanti</button>
    </div>
  </div>

  <div x-show="currentStep === 2" x-cloak>
    <label class="block text-sm">Indirizzo</label>
    <input x-model="formData.address" class="mt-1 block w-full border rounded" />
    <div class="mt-2 flex justify-between">
      <button @click="currentStep=1" class="px-3 py-2 rounded border">Indietro</button>
      <button @click="currentStep=3" class="px-3 py-2 rounded bg-primary text-white">Avanti</button>
    </div>
  </div>

  <div x-show="currentStep === 3" x-cloak>
    <h4 class="font-semibold">Riepilogo</h4>
    <pre class="text-sm bg-gray-50 p-2 rounded" x-text="JSON.stringify(formData, null, 2)"></pre>
    <div class="mt-2 flex justify-between">
      <button @click="currentStep=2" class="px-3 py-2 rounded border">Indietro</button>
      <button @click="$dispatch('checkout:submit', { data: formData })" class="px-3 py-2 rounded bg-primary text-white">Conferma</button>
    </div>
  </div>
</div>
