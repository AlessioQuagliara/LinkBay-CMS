{% extends "/admin/cms/interface/render.html" %}

{% block content %}
   

        <div class="row" data-aos="fade-up">
            <div class="col-12 mb-3 ">
                <button type="button" class="btn btn-dark btn-sm"><i class="fa-solid fa-inbox"></i> Orders to be Processed <span class="badge text-bg-secondary">4</span></button>
                <button type="button" class="btn btn-dark btn-sm">Orders to Ship</button>
            </div>
            <div class="col-md-12 mb-3">
              <style>
                .card {
                    position: relative;
                    height: 200px; /* Altezza ridotta */
                    overflow: hidden;
                }
                .card-img {
                    height: 100%;
                    object-fit: cover;
                    filter: brightness(40%); /* Velo opaco */
                }
                .card-img-overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    color: white;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: flex-start; /* Allinea il contenuto a sinistra */
                }
                .card-title, .card-text {
                    margin-bottom: 0.5rem;
                }
                .btn-small {
                    padding: 0.25rem 0.5rem; /* Dimensioni ridotte del bottone */
                    font-size: 0.875rem; /* Font piccolo */
                }
                .form-check-input:checked {
                  background-color: #ff5757 !important;
                  border-color: #ff5757 !important;
                }
                </style>
                <div class="card text-bg-dark">
                  <img src="{{ url_for('static', filename='images/store_image.webp') }}" 
                  width="899px" 
                  height="198px" 
                  class="card-img" 
                  alt="..."
                  style="object-fit: cover; object-position: center;">
                  <div class="card-img-overlay">
                      <h5 class="card-title">Your Online Store</h5>
                      <p class="card-text"><i class="fa-regular fa-circle-dot text-danger"></i> <strong>12</strong> Visitors Now</p>
                      <p class="card-text"><small>Last updated 3 mins ago</small></p>
                      <a href="../../../" target="_blank" class="btn btn-light btn-small">View Online Store</a>
                      <a href=" " class="btn btn-danger btn-small">Edit Store</a>
                  </div>
                </div>

            </div>
            <div class="col-12 mb-3">
                <div class="accordion" id="accordionPanelsStayOpenExample">
                    <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                          Brief Guide
                        </button>
                      </h2>
                      <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
                        <div class="accordion-body">
                          <strong>Welcome to your online shop! </strong> Create an innovative design to stand out from the crowd with our 360° editor, get help from experts if you can’t do it yourself. Add your products, set up shipping, payment methods and start selling!
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                          How To Sell
                        </button>
                      </h2>
                      <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <ul class="list-group">
                                <li class="list-group-item"><input class="form-check-input" type="checkbox" >&nbsp;  Add your first product &nbsp;<a href="products" class="btn btn-small btn-danger"><i class="fa-solid fa-share-from-square"></i></a></li>
                                <li class="list-group-item"><input class="form-check-input" type="checkbox" >&nbsp;  Customize your own store &nbsp;<a href="online-content" class="btn btn-small btn-danger"><i class="fa-solid fa-share-from-square"></i></a></li>
                                <li class="list-group-item"><input class="form-check-input" type="checkbox" >&nbsp;  Get your own internet domain &nbsp;<a href="domain" class="btn btn-small btn-danger"><i class="fa-solid fa-share-from-square"></i></a></li>
                                <li class="list-group-item"><input class="form-check-input" type="checkbox" >&nbsp;  Enter shipping details &nbsp;<a href="shipping" class="btn btn-small btn-danger"><i class="fa-solid fa-share-from-square"></i></a></li>
                                <li class="list-group-item"><input class="form-check-input" type="checkbox" >&nbsp;  Enter the payment system &nbsp;<a href="" class="btn btn-small btn-danger"><i class="fa-solid fa-share-from-square"></i></a></li>
                              </ul>
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
                          Start to Sell
                        </button>
                      </h2>
                      <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
                        <div class="accordion-body">
                          Subscribe a subscription plan with us to be able to use your online store for sale. &nbsp;<a href="" class="btn btn-small btn-danger"><i class="fa-solid fa-share-from-square"></i></a>
                        </div>
                      </div>
                    </div>
                  </div>
            </div>

            <div class="container my-4">
              <div id="assistant-container" class="card shadow rounded-3">
                  <div class="card-body">
                      <h5 class="card-title text-center mb-3">AI Assistant</h5>
                      <div class="input-group mb-3">
                          <input type="text" id="user-input" class="form-control" placeholder="Ask anything..." aria-label="User input">
                          <button id="send-btn" class="btn btn-primary">Send</button>
                      </div>
                      <div id="response-container" class="mt-3">
                          <h6>Response:</h6>
                          <div id="response" class="alert alert-light border rounded p-2"></div>
                      </div>
                  </div>
              </div>
          </div>
          
          <script>
              document.getElementById('send-btn').addEventListener('click', async () => {
                  const query = document.getElementById('user-input').value;
          
                  if (!query.trim()) {
                      alert("Please enter a valid query.");
                      return;
                  }
          
                  try {
                      const response = await fetch('/assistant', {
                          method: 'POST',
                          headers: { 'Content-Type': 'application/json' },
                          body: JSON.stringify({
                              query: query,
                              shop_data: "Dati dell'azienda o altri contesti"
                          })
                      });
          
                      const data = await response.json();
          
                      if (response.ok) {
                          document.getElementById('response').innerText = data.response;
                          document.getElementById('response').classList.replace('alert-danger', 'alert-light');
                      } else {
                          document.getElementById('response').innerText = data.error || "Error processing your request.";
                          document.getElementById('response').classList.replace('alert-light', 'alert-danger');
                      }
                  } catch (error) {
                      console.error("Error:", error);
                      document.getElementById('response').innerText = "An unexpected error occurred.";
                      document.getElementById('response').classList.replace('alert-light', 'alert-danger');
                  }
              });
          </script>

        </div>
        <br><br><br><br><br>


{% endblock %}