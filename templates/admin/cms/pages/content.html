{% extends "/admin/cms/interface/render.html" %}

{% block content %}
   
<div class="row" data-aos="fade-up">
    <div class="col-md-12 mb-3">
        <style>
            .store-banner {
                position: relative;
                height: 400px; /* Altezza maggiore per la foto dello store */
                background-image: url("{{ url_for('static', filename='images/store_image.webp') }}");
                background-size: cover;
                background-position: center;
                filter: brightness(50%); /* Riduzione della luminosit√† per effetto opaco */
                display: flex;
                justify-content: center;
                align-items: center;
                border-radius: 15px; /* Bordi arrotondati */
            }
            
            .store-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                text-align: center;
                color: white;
                border-radius: 15px; /* Bordi arrotondati anche per il contenuto */
            }

            .store-title {
                font-size: 2.5rem;
                font-weight: bold;
                text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
            }

            .store-buttons {
                margin-top: 1rem;
            }

            .store-buttons a {
                margin: 0 10px;
            }

            .card-footer {
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-radius: 15px;
            }

            .card {
                border-radius: 15px; /* Bordi arrotondati per tutte le card */
            }

            .card-body {
                border-radius: 15px;
            }

            .card img {
                border-radius: 15px;
            }

            .btn {
                border-radius: 15px;
            }
        </style>

        <div class="store-banner">
            <div class="store-overlay">
                <h2 class="store-title">Your Online Store: {{ shop['shop_name'] }}</h2>
            </div>
        </div>
    </div>
</div>

<h5 class="mt-4 text-center" data-aos="fade-up">More Options</h5>

<!-- Imposta il layout delle card con Bootstrap  -->
<div class="row row-cols-1 row-cols-md-3 g-4" data-aos="fade-up">
    <div class="col">
        <div class="theme-card card" style="background-image: url(https://via.placeholder.com/300x200); background-size: cover;">
            <div class="card-body mt-4">
                <h5 class="card-title">More Design Tool</h5>
                <p class="card-text">Download other design tools, differentiate your brand from the crowd.</p>
                <a href="/store-components" class="btn btn-danger btn-small">Download other tools</a>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="theme-card card text-dark" style="background-image: url(../../../../static/images/screenshot_result.png); background-size: cover;">
            <div class="card-body mt-4">
                <h5 class="card-title">Edit Store Drag&Drop</h5>
                <p class="card-text"><span class="badge text-bg-secondary">Theme in use<strong>: {{ shop['themeOptions'] }}</strong></span></p>
                <p class="card-text"><small>Last Theme Edit: <span class="badge text-bg-secondary"><strong>{{ minutes_ago }}</strong> minutes ago</span></small></p>
                <a href="{{ url_for('editor_interface') }}" class="btn btn-danger btn-small">Edit Store</a>
                <a href="/home" target="_blank" class="btn btn-dark btn-small">View Online Store</a>
                <a href="" id="capture-screenshot-btn" class="btn btn-dark btn-small"><i class="fa-solid fa-arrows-rotate"></i></a>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="theme-card card text-white" style="background-image: url(../../../../static/images/codeeditor.png); background-size: cover;">
            <div class="card-body mt-4">
                <h5 class="card-title">Edit Code</h5>
                <p class="card-text">Easily edit the Bootstrap 5.3.3 code of your site for customization.</p>
                <a href="/admin/cms/function/edit-code/home" class="btn btn-danger btn-small">Edit Code</a>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="theme-card card text-white" style="background-image: url(../../../../static/images/scripteditor.png); background-size: cover;">
            <div class="card-body mt-4">
                <h5 class="card-title">Add Personal Script</h5>
                <p class="card-text">Create your own custom script and integrate it into your site seamlessly.</p>
                <a href="/admin/web_settings/edit" class="btn btn-danger btn-small">Edit Store</a>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="theme-card card" style="background-image: url(https://via.placeholder.com/300x200); background-size: cover;">
            <div class="card-body mt-4">
                <h5 class="card-title">Add Cookie Bar</h5>
                <p class="card-text">Add a customizable cookie bar to your site for privacy compliance and a clean design.</p>
                <button class="btn btn-danger btn-small" onclick="CustomScript()">Add Cookie Bar</button>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="theme-card card" style="background-image: url(https://via.placeholder.com/300x200); background-size: cover;">
            <div class="card-body mt-4">
                <h5 class="card-title">Add Captcha</h5>
                <p class="card-text">Integrate a Captcha system to protect your site from spam and automated abuse.</p>
                <button class="btn btn-danger btn-small" onclick="CustomScript()">Add Captcha</button>
            </div>
        </div>
    </div>

    <div class="col">
        <div class="theme-card card" style="background-image: url(https://via.placeholder.com/300x200); background-size: cover;">
            <div class="card-body mt-4">
                <h5 class="card-title">Add Pop-Up</h5>
                <p class="card-text">Create engaging pop-ups for your site to increase user interaction and conversions.</p>
                <button class="btn btn-danger btn-small" onclick="CustomScript()">Add Pop-Up</button>
            </div>
        </div>
    </div>
</div>


<script>
    function addTheme() {
        Swal.fire({
            title: 'Add New Theme',
            text: 'Add new theme functionality',
            icon: 'info',
            confirmButtonText: 'OK'
        });
    }

    function updateTheme() {
        Swal.fire({
            title: 'Update Theme',
            text: 'Update theme functionality',
            icon: 'info',
            confirmButtonText: 'OK'
        });
    }

    function removeTheme() {
        Swal.fire({
            title: 'Are you sure?',
            text: 'You won\'t be able to revert this!',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, remove it!'
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.fire(
                    'Removed!',
                    'Your theme has been removed.',
                    'success'
                )
            }
        })
    }

    function selectTheme() {
        Swal.fire({
            title: 'Select Theme',
            text: 'Select theme functionality',
            icon: 'info',
            confirmButtonText: 'OK'
        });
    }

    // Rendeirizza alla homepage e fai uno screen
    document.getElementById('capture-screenshot-btn').addEventListener('click', function(event) {
        event.preventDefault();  // Evita il comportamento di default del link
        
        // Effettua una chiamata AJAX per avviare lo screenshot
        fetch('/capture-screenshot', {
            method: 'POST'
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Effettua il refresh della pagina corrente
                window.location.reload();
            }
        })
        .catch(error => {
            console.error('Errore nel processo di screenshot:', error);
        });
    });
</script>

{% endblock %}